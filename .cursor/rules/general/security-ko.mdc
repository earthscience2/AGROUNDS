---
# âš ï¸ ì´ íŒŒì¼ì€ AIê°€ ì½ì§€ ì•ŠìŠµë‹ˆë‹¤ (Human Reference Only)
# AIëŠ” security.mdc (ì˜ë¬¸íŒ)ë§Œ ì°¸ì¡°í•©ë‹ˆë‹¤
---

# ğŸ” ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€

## ì—­í•  ì •ì˜
ë‹¹ì‹ ì€ ì‚¬ìš©ì ë°ì´í„° ë³´í˜¸, ê³µê²© ë°©ì§€, ì‹œìŠ¤í…œ ë¬´ê²°ì„± ë³´ì¥ì„ ìœ„í•œ ë³´ì•ˆ ì¡°ì¹˜ë¥¼ êµ¬í˜„í•˜ê³  ìœ ì§€í•  ì±…ì„ì´ ìˆìŠµë‹ˆë‹¤.

---

## ğŸš¨ ë³´ì•ˆ ì›ì¹™

### âŒ ì ˆëŒ€ ê¸ˆì§€ ì‚¬í•­
1. **í•˜ë“œì½”ë”©ëœ ìê²©ì¦ëª… ê¸ˆì§€** - í•­ìƒ í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©
2. **ë¡œê·¸ì— ë¯¼ê°í•œ ë°ì´í„° ê¸ˆì§€** - ì ˆëŒ€ ë¹„ë°€ë²ˆí˜¸, í† í°, PII ë¡œê¹…í•˜ì§€ ë§ ê²ƒ
3. **SQL ë¬¸ìì—´ ì—°ê²° ê¸ˆì§€** - í•­ìƒ íŒŒë¼ë¯¸í„°í™”ëœ ì¿¼ë¦¬ ì‚¬ìš©
4. **ê²€ì¦ë˜ì§€ ì•Šì€ ì…ë ¥ ê¸ˆì§€** - ëª¨ë“  ì‚¬ìš©ì ì…ë ¥ ê²€ì¦ ë° ì •í™”
5. **í‰ë¬¸ ë¹„ë°€ë²ˆí˜¸ ê¸ˆì§€** - í•­ìƒ bcrypt/argon2ë¡œ í•´ì‹œ

### âœ… í•„ìˆ˜ ìš”êµ¬ì‚¬í•­
1. **ëª¨ë“  ì…ë ¥ ê²€ì¦** - ì ˆëŒ€ ì‚¬ìš©ì ì…ë ¥ì„ ì‹ ë¢°í•˜ì§€ ë§ ê²ƒ
2. **íŒŒë¼ë¯¸í„°í™”ëœ ì¿¼ë¦¬ ì‚¬ìš©** - SQL injection ë°©ì§€
3. **Rate Limiting êµ¬í˜„** - ë‚¨ìš© ë°©ì§€
4. **ë¯¼ê°í•œ ë°ì´í„° ì•”í˜¸í™”** - ì €ì¥ ë° ì „ì†¡ ì‹œ
5. **ì˜ì¡´ì„± ìµœì‹  ìƒíƒœ ìœ ì§€** - ì·¨ì•½ì  íŒ¨ì¹˜

---

## ğŸ›¡ï¸ OWASP Top 10 ë³´í˜¸

### 1. Injection ê³µê²© (SQL, NoSQL, Command)

#### SQL Injection ë°©ì§€
```python
# âŒ ì·¨ì•½ - ë¬¸ìì—´ ì—°ê²°
user_email = request.data.get('email')
query = f"SELECT * FROM user WHERE user_id = '{user_email}'"  # ìœ„í—˜!
User.objects.raw(query)

# âœ… ì•ˆì „ - íŒŒë¼ë¯¸í„°í™”ëœ ì¿¼ë¦¬ (Django ORM)
user_email = request.data.get('email')
user = User.objects.filter(user_id=user_email).first()

# âœ… ì•ˆì „ - íŒŒë¼ë¯¸í„°í™”ëœ raw ì¿¼ë¦¬
user_email = request.data.get('email')
User.objects.raw("SELECT * FROM user WHERE user_id = %s", [user_email])
```

#### Command Injection ë°©ì§€
```python
# âŒ ì·¨ì•½ - ì‚¬ìš©ì ì…ë ¥ìœ¼ë¡œ ì‰˜ ëª…ë ¹ì–´
filename = request.data.get('filename')
os.system(f"cat {filename}")  # ìœ„í—˜!

# âœ… ì•ˆì „ - subprocessë¥¼ ë¦¬ìŠ¤íŠ¸ë¡œ ì‚¬ìš©
import subprocess
filename = request.data.get('filename')
# ë¨¼ì € íŒŒì¼ëª… ê²€ì¦
if not is_valid_filename(filename):
    raise ValueError("Invalid filename")
subprocess.run(['cat', filename], check=True)
```

---

### 2. ì·¨ì•½í•œ ì¸ì¦

#### JWT í† í° ë³´ì•ˆ
```python
from rest_framework_simplejwt.tokens import RefreshToken
from datetime import timedelta

# ì„¤ì •
SIMPLE_JWT = {
    'ACCESS_TOKEN_LIFETIME': timedelta(hours=1),   # ì§§ì€ ìˆ˜ëª…
    'REFRESH_TOKEN_LIFETIME': timedelta(days=7),   # ì£¼ê°„ ë¡œí…Œì´ì…˜
    'ROTATE_REFRESH_TOKENS': True,                  # ê°±ì‹  ì‹œ ë¡œí…Œì´ì…˜
    'BLACKLIST_AFTER_ROTATION': True,               # ì´ì „ í† í° ë¸”ë™ë¦¬ìŠ¤íŠ¸
    'ALGORITHM': 'HS256',
    'SIGNING_KEY': settings.SECRET_KEY,             # í™˜ê²½ì—ì„œ
}

# ë³´ì•ˆì´ ê°•í™”ëœ í† í° ê°±ì‹ 
def refresh_token_view(request):
    """ë³´ì•ˆ ì²´í¬ì™€ í•¨ê»˜ ì•¡ì„¸ìŠ¤ í† í° ê°±ì‹ """
    try:
        refresh_token = request.data.get('refresh_token')
        
        # í† í° ê²€ì¦
        token = RefreshToken(refresh_token)
        
        # í† í°ì´ ë¸”ë™ë¦¬ìŠ¤íŠ¸ë˜ì—ˆëŠ”ì§€ í™•ì¸
        if token.is_blacklisted():
            return Response({
                "error": {"code": "TOKEN_BLACKLISTED", "message": "í† í°ì´ ë¬´íš¨í™”ë˜ì—ˆìŠµë‹ˆë‹¤"}
            }, status=401)
        
        # ìƒˆ í† í° ìƒì„±
        new_access = str(token.access_token)
        new_refresh = str(token)
        
        # ì´ì „ refresh token ë¸”ë™ë¦¬ìŠ¤íŠ¸
        token.blacklist()
        
        return Response({
            "access": new_access,
            "refresh": new_refresh
        })
        
    except Exception as e:
        logger.error(f"Token refresh failed: {str(e)}")
        return Response({
            "error": {"code": "INVALID_TOKEN", "message": "ìœ íš¨í•˜ì§€ ì•Šì€ í† í°ì…ë‹ˆë‹¤"}
        }, status=401)
```

#### ë¹„ë°€ë²ˆí˜¸ ë³´ì•ˆ
```python
from django.contrib.auth.hashers import make_password, check_password
import re

def validate_password_strength(password):
    """
    ë¹„ë°€ë²ˆí˜¸ê°€ ë³´ì•ˆ ìš”êµ¬ì‚¬í•­ì„ ì¶©ì¡±í•˜ëŠ”ì§€ ê²€ì¦
    
    ìš”êµ¬ì‚¬í•­:
    - ìµœì†Œ 8ì
    - ìµœì†Œ 1ê°œ ëŒ€ë¬¸ì
    - ìµœì†Œ 1ê°œ ì†Œë¬¸ì
    - ìµœì†Œ 1ê°œ ìˆ«ì
    - ìµœì†Œ 1ê°œ íŠ¹ìˆ˜ë¬¸ì
    """
    if len(password) < 8:
        raise ValidationError("ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤")
    
    if not re.search(r'[A-Z]', password):
        raise ValidationError("ë¹„ë°€ë²ˆí˜¸ëŠ” ëŒ€ë¬¸ìë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤")
    
    if not re.search(r'[a-z]', password):
        raise ValidationError("ë¹„ë°€ë²ˆí˜¸ëŠ” ì†Œë¬¸ìë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤")
    
    if not re.search(r'[0-9]', password):
        raise ValidationError("ë¹„ë°€ë²ˆí˜¸ëŠ” ìˆ«ìë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤")
    
    if not re.search(r'[!@#$%^&*(),.?":{}|<>]', password):
        raise ValidationError("ë¹„ë°€ë²ˆí˜¸ëŠ” íŠ¹ìˆ˜ë¬¸ìë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤")
    
    return True

# ì €ì¥ ì „ ë¹„ë°€ë²ˆí˜¸ í•´ì‹œ
user.password = make_password(password)

# ë¹„ë°€ë²ˆí˜¸ í™•ì¸
if check_password(plain_password, user.password):
    # ë¹„ë°€ë²ˆí˜¸ ì¼ì¹˜
    pass
```

#### ê³„ì • ì ê¸ˆ
```python
from django.core.cache import cache

MAX_LOGIN_ATTEMPTS = 5
LOCKOUT_DURATION = 15 * 60  # 15ë¶„

def check_login_attempts(user_id):
    """ì‹¤íŒ¨í•œ ì‹œë„ë¡œ ì¸í•´ ê³„ì •ì´ ì ê²¼ëŠ”ì§€ í™•ì¸"""
    cache_key = f"login_attempts_{user_id}"
    attempts = cache.get(cache_key, 0)
    
    if attempts >= MAX_LOGIN_ATTEMPTS:
        return False, "ê³„ì •ì´ ì ê²¼ìŠµë‹ˆë‹¤. 15ë¶„ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”"
    
    return True, None

def record_failed_login(user_id):
    """ì‹¤íŒ¨í•œ ë¡œê·¸ì¸ ì‹œë„ ê¸°ë¡"""
    cache_key = f"login_attempts_{user_id}"
    attempts = cache.get(cache_key, 0) + 1
    cache.set(cache_key, attempts, LOCKOUT_DURATION)
    
    remaining = MAX_LOGIN_ATTEMPTS - attempts
    return remaining

def reset_login_attempts(user_id):
    """ì„±ê³µì ì¸ ë¡œê·¸ì¸ í›„ ë¡œê·¸ì¸ ì‹œë„ ì´ˆê¸°í™”"""
    cache_key = f"login_attempts_{user_id}"
    cache.delete(cache_key)
```

---

### 3. ë¯¼ê°í•œ ë°ì´í„° ë…¸ì¶œ

#### í™˜ê²½ ë³€ìˆ˜
```python
# âŒ ì ˆëŒ€ ìê²©ì¦ëª… í•˜ë“œì½”ë”©í•˜ì§€ ë§ ê²ƒ
DATABASE_PASSWORD = "assist0907"  # ì ˆëŒ€ ê¸ˆì§€!
AWS_SECRET_KEY = "abc123secret"   # ì ˆëŒ€ ê¸ˆì§€!

# âœ… í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©
import environ

env = environ.Env()
environ.Env.read_env()

DATABASE_PASSWORD = env('DB_PASSWORD')
AWS_SECRET_KEY = env('AWS_SECRET_ACCESS_KEY')
```

```bash
# .env íŒŒì¼ (ì ˆëŒ€ gitì— ì»¤ë°‹í•˜ì§€ ë§ ê²ƒ)
DB_PASSWORD=secure_password_here
AWS_SECRET_ACCESS_KEY=secret_key_here
JWT_SECRET_KEY=random_secret_key

# .gitignore (ë°˜ë“œì‹œ í¬í•¨)
.env
*.env
.env.local
```

#### ë°ì´í„° ì•”í˜¸í™”
```python
from cryptography.fernet import Fernet
from django.conf import settings

class DataEncryption:
    """ë¯¼ê°í•œ ë°ì´í„° ì•”í˜¸í™”/ë³µí˜¸í™”"""
    
    def __init__(self):
        self.key = settings.ENCRYPTION_KEY.encode()
        self.cipher = Fernet(self.key)
    
    def encrypt(self, plain_text):
        """ë¯¼ê°í•œ ë°ì´í„° ì•”í˜¸í™”"""
        if not plain_text:
            return None
        return self.cipher.encrypt(plain_text.encode()).decode()
    
    def decrypt(self, encrypted_text):
        """ë¯¼ê°í•œ ë°ì´í„° ë³µí˜¸í™”"""
        if not encrypted_text:
            return None
        return self.cipher.decrypt(encrypted_text.encode()).decode()

# ì‚¬ìš©ë²•
encryptor = DataEncryption()

# ì €ì¥ ì „ ì•”í˜¸í™”
user.ssn = encryptor.encrypt(ssn)
user.save()

# í•„ìš”ì‹œ ë³µí˜¸í™”
decrypted_ssn = encryptor.decrypt(user.ssn)
```

#### ë¡œê·¸ì—ì„œ ë¯¼ê°í•œ ë°ì´í„° ë§ˆìŠ¤í‚¹
```python
import re

def mask_email(email):
    """ë¡œê¹…ì„ ìœ„í•´ ì´ë©”ì¼ ë§ˆìŠ¤í‚¹"""
    if not email or '@' not in email:
        return email
    local, domain = email.split('@')
    masked_local = local[:2] + '***' if len(local) > 2 else '***'
    return f"{masked_local}@{domain}"

def mask_phone(phone):
    """ì „í™”ë²ˆí˜¸ ë§ˆìŠ¤í‚¹"""
    if not phone or len(phone) < 4:
        return '***'
    return phone[:-4] + '****'

# ë§ˆìŠ¤í‚¹ëœ ë°ì´í„°ë¡œ ë¡œê¹…
logger.info(f"User created: {mask_email(email)}, phone: {mask_phone(phone)}")
```

---

### 4. XML ì™¸ë¶€ ì—”í‹°í‹° (XXE)

#### XML íŒŒì‹± ë³´ì•ˆ
```python
import defusedxml.ElementTree as ET

# âŒ ì·¨ì•½ - í‘œì¤€ XML íŒŒì„œ
import xml.etree.ElementTree as BadET
tree = BadET.parse(xml_file)  # XXEì— ì·¨ì•½

# âœ… ì•ˆì „ - Defused XML íŒŒì„œ
tree = ET.parse(xml_file)  # XXEë¡œë¶€í„° ë³´í˜¸ë¨
```

---

### 5. ì·¨ì•½í•œ ì ‘ê·¼ ì œì–´

#### ê¶Œí•œ ì²´í¬
```python
from rest_framework.permissions import BasePermission

class IsTeamAdmin(BasePermission):
    """ì‚¬ìš©ìê°€ íŒ€ ê´€ë¦¬ìì¸ì§€ í™•ì¸"""
    
    def has_permission(self, request, view):
        # ì‚¬ìš©ìëŠ” ì¸ì¦ë˜ì–´ì•¼ í•¨
        if not request.user or not request.user.is_authenticated:
            return False
        return True
    
    def has_object_permission(self, request, view, obj):
        # ì‚¬ìš©ìê°€ ì´ íŒ€ì˜ ê´€ë¦¬ìì¸ì§€ í™•ì¸
        team_code = obj.team_code if hasattr(obj, 'team_code') else obj
        
        is_admin = PlayerTeamCross.objects.filter(
            user_code=request.user.user_code,
            team_code=team_code,
            role__in=['admin', 'owner'],
            deleted_at__isnull=True
        ).exists()
        
        return is_admin

# Viewì—ì„œ ì‚¬ìš©
class UpdateTeamView(APIView):
    permission_classes = [IsAuthenticated, IsTeamAdmin]
    
    def put(self, request, team_code):
        team = get_object_or_404(TeamInfo, team_code=team_code)
        
        # DRFê°€ ìë™ìœ¼ë¡œ ê¶Œí•œ ì²´í¬
        self.check_object_permissions(request, team)
        
        # íŒ€ ì—…ë°ì´íŠ¸
        # ...
```

#### í–‰ ë ˆë²¨ ë³´ì•ˆ
```python
def get_user_teams(user_code):
    """ì‚¬ìš©ìì—ê²Œ ë³´ì´ëŠ” íŒ€ ê°€ì ¸ì˜¤ê¸° (í–‰ ë ˆë²¨ ë³´ì•ˆ)"""
    return TeamInfo.objects.filter(
        Q(playerteamcross__user_code=user_code) |  # ì‚¬ìš©ìê°€ ë©¤ë²„
        Q(public=True),                              # ë˜ëŠ” íŒ€ì´ ê³µê°œ
        deleted_at__isnull=True
    ).distinct()

def can_user_view_team(user_code, team_code):
    """ì‚¬ìš©ìê°€ íŒ€ ë°ì´í„°ë¥¼ ë³¼ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸"""
    return PlayerTeamCross.objects.filter(
        user_code=user_code,
        team_code=team_code,
        deleted_at__isnull=True
    ).exists()
```

---

### 6. ë³´ì•ˆ ì„¤ì • ì˜¤ë¥˜

#### Django ë³´ì•ˆ ì„¤ì •
```python
# settings/prod.py - í”„ë¡œë•ì…˜ ë³´ì•ˆ ì„¤ì •

# HTTPS/SSL
SECURE_SSL_REDIRECT = True
SESSION_COOKIE_SECURE = True
CSRF_COOKIE_SECURE = True

# HSTS (HTTP Strict Transport Security)
SECURE_HSTS_SECONDS = 31536000  # 1ë…„
SECURE_HSTS_INCLUDE_SUBDOMAINS = True
SECURE_HSTS_PRELOAD = True

# Content Security
SECURE_CONTENT_TYPE_NOSNIFF = True
SECURE_BROWSER_XSS_FILTER = True
X_FRAME_OPTIONS = 'DENY'

# CSRF
CSRF_COOKIE_HTTPONLY = True
CSRF_COOKIE_SAMESITE = 'Strict'

# Session
SESSION_COOKIE_HTTPONLY = True
SESSION_COOKIE_SAMESITE = 'Strict'
SESSION_COOKIE_AGE = 3600  # 1ì‹œê°„

# Debug
DEBUG = False  # í”„ë¡œë•ì…˜ì—ì„œ ì ˆëŒ€ True ê¸ˆì§€
ALLOWED_HOSTS = ['agrounds.com', 'www.agrounds.com']

# Security middleware
MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    # ... ê¸°íƒ€ ë¯¸ë“¤ì›¨ì–´
]
```

---

### 7. Cross-Site Scripting (XSS)

#### ì…ë ¥ ì •í™”
```python
import bleach
from django.utils.html import escape

def sanitize_html_input(text):
    """XSS ë°©ì§€ë¥¼ ìœ„í•´ HTML ì •í™”"""
    # ì•ˆì „í•œ íƒœê·¸ë§Œ í—ˆìš©
    allowed_tags = ['p', 'br', 'strong', 'em', 'u']
    allowed_attributes = {}
    
    return bleach.clean(
        text,
        tags=allowed_tags,
        attributes=allowed_attributes,
        strip=True
    )

# ì‚¬ìš©ë²•
user_bio = request.data.get('bio')
sanitized_bio = sanitize_html_input(user_bio)

# ë˜ëŠ” ëª¨ë“  HTML ì´ìŠ¤ì¼€ì´í”„
safe_text = escape(user_input)
```

#### í”„ë¡ íŠ¸ì—”ë“œ XSS ë°©ì§€ (React)
```javascript
// âœ… Reactê°€ ìë™ìœ¼ë¡œ ë‚´ìš© ì´ìŠ¤ì¼€ì´í”„
const UserProfile = ({ userName }) => {
  return <div>{userName}</div>;  // ìë™ìœ¼ë¡œ ì´ìŠ¤ì¼€ì´í”„ë¨
};

// âŒ ìœ„í—˜ - dangerouslySetInnerHTML ì‚¬ìš©
const Bio = ({ htmlContent }) => {
  return (
    <div dangerouslySetInnerHTML={{ __html: htmlContent }} />  // XSS ìœ„í—˜!
  );
};

// âœ… ì•ˆì „ - ë Œë”ë§ ì „ ì •í™”
import DOMPurify from 'dompurify';

const SafeBio = ({ htmlContent }) => {
  const sanitized = DOMPurify.sanitize(htmlContent);
  return <div dangerouslySetInnerHTML={{ __html: sanitized }} />;
};
```

---

### 8. ì•ˆì „í•˜ì§€ ì•Šì€ ì—­ì§ë ¬í™”

#### ì•ˆì „í•œ ì—­ì§ë ¬í™”
```python
import json
import pickle  # ìœ„í—˜!

# âŒ ì ˆëŒ€ ì‹ ë¢°í•  ìˆ˜ ì—†ëŠ” ë°ì´í„°ì— pickle ì‚¬ìš© ê¸ˆì§€
data = pickle.loads(user_input)  # ì„ì˜ì˜ ì½”ë“œ ì‹¤í–‰ ê°€ëŠ¥!

# âœ… ë°ì´í„° ì§ë ¬í™”ì— JSON ì‚¬ìš©
try:
    data = json.loads(user_input)
except json.JSONDecodeError:
    return Response({"error": "Invalid JSON"}, status=400)

# âœ… ì—­ì§ë ¬í™”ëœ ë°ì´í„° ê²€ì¦
from marshmallow import Schema, fields, validate

class TeamSchema(Schema):
    name = fields.Str(required=True, validate=validate.Length(min=2, max=45))
    local = fields.Str(required=True)

schema = TeamSchema()
try:
    validated_data = schema.load(json.loads(user_input))
except ValidationError as e:
    return Response({"error": e.messages}, status=400)
```

---

### 9. ì•Œë ¤ì§„ ì·¨ì•½ì ì´ ìˆëŠ” ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©

#### ì˜ì¡´ì„± ê´€ë¦¬
```bash
# ì·¨ì•½ì  í™•ì¸
pip-audit  # Python
npm audit  # JavaScript

# ì˜ì¡´ì„± ì—…ë°ì´íŠ¸
pip install --upgrade package_name
npm update package_name

# ì¬í˜„ ê°€ëŠ¥í•œ ë¹Œë“œë¥¼ ìœ„í•œ Lock íŒŒì¼
requirements.txt  # Python
package-lock.json  # JavaScript
```

```python
# requirements.txt - ë²„ì „ ê³ ì •
Django==4.0.3
djangorestframework==3.14.0
djangorestframework-simplejwt==5.3.1
cryptography>=42.0.2  # ë³´ì•ˆ íŒ¨ì¹˜ë¥¼ ìœ„í•´ >= ì‚¬ìš©
```

---

### 10. ë¶ˆì¶©ë¶„í•œ ë¡œê¹… & ëª¨ë‹ˆí„°ë§

#### ë³´ì•ˆ ì´ë²¤íŠ¸ ë¡œê¹…
```python
import logging

security_logger = logging.getLogger('security')

# ë³´ì•ˆ ì´ë²¤íŠ¸ ë¡œê¹…
def log_security_event(event_type, user_code, details):
    """ë³´ì•ˆ ê´€ë ¨ ì´ë²¤íŠ¸ ë¡œê¹…"""
    security_logger.warning(f"Security event: {event_type}", extra={
        "event_type": event_type,
        "user_code": user_code,
        "details": details,
        "timestamp": timezone.now().isoformat(),
        "ip_address": details.get('ip_address'),
        "user_agent": details.get('user_agent')
    })

# ì˜ˆì‹œ
log_security_event("FAILED_LOGIN", user_id, {
    "ip_address": request.META.get('REMOTE_ADDR'),
    "attempts": attempts
})

log_security_event("PERMISSION_DENIED", user_code, {
    "resource": team_code,
    "action": "delete_team"
})

log_security_event("SUSPICIOUS_ACTIVITY", user_code, {
    "reason": "100 API calls in 1 minute",
    "endpoint": "/api/user/list/"
})
```

---

## ğŸš¦ Rate Limiting

### Django Rate Limiting
```python
from django.core.cache import cache
from rest_framework.throttling import BaseThrottle

class CustomRateThrottle(BaseThrottle):
    """ì»¤ìŠ¤í…€ rate limiting"""
    
    def allow_request(self, request, view):
        # ì‚¬ìš©ì ì‹ë³„ì ê°€ì ¸ì˜¤ê¸°
        if request.user and request.user.is_authenticated:
            ident = request.user.user_code
        else:
            ident = self.get_ident(request)
        
        # Rate limit: ë¶„ë‹¹ 100 ìš”ì²­
        cache_key = f"throttle_{ident}"
        requests = cache.get(cache_key, 0)
        
        if requests >= 100:
            return False
        
        cache.set(cache_key, requests + 1, 60)  # 60ì´ˆ
        return True

# Viewì—ì„œ ì‚¬ìš©
class TeamListView(APIView):
    throttle_classes = [CustomRateThrottle]
    
    def get(self, request):
        # ...
```

---

## âœ… ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì½”ë“œ ë¦¬ë·° ë³´ì•ˆ ì²´í¬
- [ ] í•˜ë“œì½”ë”©ëœ ìê²©ì¦ëª… ì—†ìŒ
- [ ] ëª¨ë“  ì…ë ¥ ê²€ì¦ë¨
- [ ] íŒŒë¼ë¯¸í„°í™”ëœ ì¿¼ë¦¬ ì‚¬ìš©
- [ ] ë³´í˜¸ëœ ì—”ë“œí¬ì¸íŠ¸ì— ì¸ì¦ í•„ìš”
- [ ] ê¶Œí•œ ì²´í¬ë¨
- [ ] Rate limiting êµ¬í˜„ë¨
- [ ] HTTPS ê°•ì œ
- [ ] ë³´ì•ˆ í—¤ë” ì„¤ì •ë¨
- [ ] ë¯¼ê°í•œ ë°ì´í„° ì•”í˜¸í™”ë¨
- [ ] ì—ëŸ¬ ë©”ì‹œì§€ê°€ ì •ë³´ ìœ ì¶œí•˜ì§€ ì•ŠìŒ
- [ ] ì˜ì¡´ì„± ìµœì‹  ìƒíƒœ
- [ ] ë¡œê¹…ì´ ë¯¼ê°í•œ ë°ì´í„° ë…¸ì¶œí•˜ì§€ ì•ŠìŒ

### ë°°í¬ ë³´ì•ˆ
- [ ] í™˜ê²½ ë³€ìˆ˜ ì„¤ì •ë¨
- [ ] í”„ë¡œë•ì…˜ì—ì„œ DEBUG = False
- [ ] Secret key ë¡œí…Œì´ì…˜ë¨
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ìê²©ì¦ëª… ë³´ì•ˆ ì²˜ë¦¬
- [ ] CORS ì˜¬ë°”ë¥´ê²Œ ì„¤ì •
- [ ] SSL/TLS ì¸ì¦ì„œ ìœ íš¨
- [ ] ë°©í™”ë²½ ê·œì¹™ ì„¤ì •
- [ ] ë³´ì•ˆ ëª¨ë‹ˆí„°ë§ í™œì„±í™”
- [ ] ë°±ì—… ë° ë³µêµ¬ í…ŒìŠ¤íŠ¸ë¨
- [ ] ì‚¬ê³  ëŒ€ì‘ ê³„íš ì¤€ë¹„ë¨

---

## ğŸ”— ê´€ë ¨ ê°€ì´ë“œë¼ì¸

**í•¨ê»˜ ì°¸ì¡°:**
- `general/error-handling.mdc` - ì•ˆì „í•œ ì—ëŸ¬ í•¸ë“¤ë§
- `general/testing-strategy.mdc` - ë³´ì•ˆ í…ŒìŠ¤íŒ…
- `backend/api-development.mdc` - API ë³´ì•ˆ
- `database/patterns.mdc` - ë°ì´í„°ë² ì´ìŠ¤ ë³´ì•ˆ

---

**ê¸°ì–µí•˜ì„¸ìš”: ë³´ì•ˆì€ ê¸°ëŠ¥ì´ ì•„ë‹ˆë¼ ê¸°ë³¸ ìš”êµ¬ì‚¬í•­ì…ë‹ˆë‹¤. ì²˜ìŒë¶€í„° êµ¬ì¶•í•˜ì„¸ìš”!**
