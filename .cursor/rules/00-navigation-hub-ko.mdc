# 🎯 AGROUNDS 개발 규칙 네비게이션 허브

---
# ⚠️ 이 파일은 AI가 읽지 않습니다 (Human Reference Only)
# AI는 00-navigation-hub.mdc (영문판)만 참조합니다
# alwaysApply를 설정하지 마세요!
---

## 역할 정의
당신은 AGROUNDS 스포츠 분석 플랫폼의 개발 코디네이터입니다. 이 문서는 프로젝트의 모든 개발 규칙에 대한 중앙 네비게이션 허브입니다.

## 📌 참고사항
- 이 파일은 **사람 개발자를 위한 한글 참조용**입니다
- AI는 영문판 파일만 읽습니다 (`00-navigation-hub.mdc`)
- 규칙 변경시 영문판과 한글판 모두 업데이트해야 합니다

## 🚨 필수 준수 사항

### ❌ 절대 금지 사항 (모든 작업에 적용)
1. **새 파일 생성 금지** - 기존 파일만 수정
2. **하드 삭제 금지** - 항상 `deleted_at` 필드 사용
3. **디자인 시스템 위반 금지** - CSS 변수 엄격히 준수
4. **관련 없는 코드 수정 금지** - 요청과 직접 관련된 코드만 수정

### ✅ 핵심 원칙
1. **Soft Delete 패턴** - `deleted_at` 타임스탬프 필드 사용
2. **기존 패턴 준수** - 확립된 코드 컨벤션 정확히 따르기
3. **프로덕션 테스트** - `https://agrounds.com/`에서 모든 변경사항 테스트
4. **디자인 일관성** - 승인된 색상, 타이포그래피, 간격 사용

---

## 📚 작업 유형별 규칙 네비게이션

### 🗄️ **데이터베이스 작업**
**언제 사용**: DB 스키마 확인, 모델 정의, 실제 DB와 동기화, 쿼리 작성

**규칙 파일**: `database/access.mdc` → `database/patterns.mdc`

**핵심 포인트**:
- 실제 DB 스키마와 models.py 동기화
- MySQL enum 타입 정확히 매핑
- Soft delete 필수 구현
- 모든 모델에 `managed = False` 설정

**예시 질문**:
- "DB 스키마와 models.py가 일치하는지 확인해줘"
- "user 테이블의 실제 구조 확인해줘"
- "PlayerAnal 모델에 새 필드 추가해줘"

---

### 🔌 **Backend API 개발**
**언제 사용**: Django REST API 엔드포인트 생성/수정, 시리얼라이저, 뷰 작성

**규칙 파일**: `backend/api-development.mdc`

**핵심 포인트**:
- Swagger 문서화 필수
- JWT 인증 패턴
- 표준 응답 형식
- 적절한 에러 핸들링

**예시 질문**:
- "사용자 목록 조회 API 만들어줘"
- "팀 생성 엔드포인트 수정해줘"
- "경기 데이터 API에 페이지네이션 추가해줘"

---

### 🎨 **프론트엔드 개발**
**언제 사용**: React 컴포넌트 생성/수정, 상태 관리, UI 구현

**규칙 파일**: `frontend/components.mdc` + `frontend/design-system.mdc`

**핵심 포인트**:
- React 함수형 컴포넌트 + Hooks
- SCSS 모듈 사용
- 반응형 디자인 (모바일 우선)
- 디자인 시스템 준수

**예시 질문**:
- "팀 선택 컴포넌트 만들어줘"
- "경기 상세 페이지 수정해줘"
- "버튼 스타일이 디자인 시스템과 맞는지 확인해줘"

---

### 🎭 **디자인 시스템 & 스타일링**
**언제 사용**: CSS/SCSS 작업, 색상/타이포그래피/간격 확인, UI 컴포넌트 스타일링

**규칙 파일**: `frontend/design-system.mdc`

**핵심 포인트**:
- CSS 변수 사용 (하드코딩 금지)
- Paperlogy (헤더) + Pretendard (본문) 폰트
- 접근성 기준 (WCAG AA)
- BEM 방법론

**예시 질문**:
- "primary 색상이 뭐야?"
- "버튼에 적용할 hover 스타일 알려줘"
- "모바일 반응형 브레이크포인트는?"

---

### ⚡ **AWS Lambda 함수**
**언제 사용**: 분석 처리 Lambda 함수, 비동기 작업, 대용량 데이터 처리

**규칙 파일**: `cloud/lambda.mdc` (생성 필요)

**핵심 포인트**:
- player_anal: 플레이어 분석 처리
- 타임아웃 및 메모리 최적화
- CloudWatch 로깅
- S3 연동

**예시 질문**:
- "Lambda 함수 배포 방법 알려줘"
- "분석 Lambda에 새 지표 추가해줘"
- "Lambda 로그 확인 방법은?"

---

### 🖥️ **서버 & 인프라**
**언제 사용**: 배포, Gunicorn 설정, 환경 변수, 서버 구성

**규칙 파일**: `backend/server-infrastructure.mdc` (생성 필요)

**핵심 포인트**:
- Gunicorn 서버 관리
- 환경 변수 (.env)
- AWS RDS (MySQL)
- 로깅 및 모니터링

**예시 질문**:
- "서버 재시작 방법은?"
- "환경 변수 추가하는 법은?"
- "데이터베이스 연결 확인해줘"

---

### 🔐 **인증 & 권한**
**언제 사용**: JWT 토큰, 소셜 로그인, 권한 체크

**규칙 파일**: `backend/authentication.mdc` (생성 필요)

**핵심 포인트**:
- JWT (simplejwt) 인증
- Kakao, Apple, Naver 로그인
- 권한 레벨 관리
- 보안 best practices

**예시 질문**:
- "JWT 토큰 갱신 로직 확인해줘"
- "Kakao 로그인 구현 방법은?"
- "관리자 권한 체크 어떻게 해?"

---

### 📦 **AWS S3 & 스토리지**
**언제 사용**: 파일 업로드/다운로드, 이미지 처리, CloudFront 설정

**규칙 파일**: `cloud/storage.mdc` (생성 필요)

**핵심 포인트**:
- S3 버킷: aground-gps
- CloudFront CDN
- 프로필 이미지, 비디오 관리
- 파일 업로드 best practices

**예시 질문**:
- "프로필 이미지 업로드 구현해줘"
- "S3 파일 URL 생성 방법은?"
- "CloudFront 캐시 무효화 방법은?"

---

### 📊 **분석 & 데이터 처리**
**언제 사용**: 플레이어/팀 분석 로직, 통계 계산, 데이터 시각화

**규칙 파일**: `features/analytics.mdc` (생성 필요)

**핵심 포인트**:
- PlayerAnal, TeamAnal 모델
- 분석 지표 계산
- 히트맵, 스프린트 맵
- 성능 포인트 시스템

**예시 질문**:
- "평균 속도 계산 로직 확인해줘"
- "팀 조율도 지표 추가해줘"
- "히트맵 데이터 형식 알려줘"

---

### 🎥 **비디오 처리**
**언제 사용**: 비디오 업로드, 플레이어/팀 비디오 관리

**규칙 파일**: `features/video.mdc` (생성 필요)

**핵심 포인트**:
- PlayerVideo, TeamVideo 모델
- 비디오 폴더 구조
- S3 비디오 스토리지
- 비디오 메타데이터

**예시 질문**:
- "비디오 업로드 API 만들어줘"
- "경기 비디오 연결 방법은?"
- "비디오 폴더 구조 확인해줘"

---

## 🔍 빠른 의사결정 매트릭스

| 작업 유형 | 주 규칙 파일 | 보조 규칙 파일 |
|----------|------------|-------------|
| **DB 스키마 확인/수정** | `database/access.mdc` | `database/patterns.mdc` |
| **API 엔드포인트 개발** | `backend/api-development.mdc` | `database/patterns.mdc` |
| **React 컴포넌트 개발** | `frontend/components.mdc` | `frontend/design-system.mdc` |
| **CSS/SCSS 스타일링** | `frontend/design-system.mdc` | `frontend/components.mdc` |
| **데이터베이스 쿼리** | `database/patterns.mdc` | `backend/api-development.mdc` |
| **Lambda 함수 개발** | `cloud/lambda.mdc` | `features/analytics.mdc` |
| **분석 지표 계산** | `features/analytics.mdc` | `database/patterns.mdc` |
| **파일 업로드/다운로드** | `cloud/storage.mdc` | `backend/api-development.mdc` |
| **인증 구현** | `backend/authentication.mdc` | `backend/api-development.mdc` |
| **서버 배포/설정** | `backend/server-infrastructure.mdc` | - |
| **비디오 처리** | `features/video.mdc` | `cloud/storage.mdc` |

---

## 🚀 작업 시작 전 체크리스트

### 1️⃣ **작업 유형 파악**
- [ ] 위 네비게이션에서 해당 카테고리 확인
- [ ] 주 규칙 파일 식별
- [ ] 보조 규칙 파일 확인

### 2️⃣ **규칙 파일 참조**
- [ ] 해당 규칙 파일 읽기
- [ ] 기존 패턴 분석
- [ ] 유사한 구현 사례 찾기

### 3️⃣ **제약사항 확인**
- [ ] 새 파일 생성 금지 확인
- [ ] Soft delete 패턴 적용
- [ ] 디자인 시스템 준수
- [ ] 프로덕션 테스트 계획

### 4️⃣ **구현 시작**
- [ ] 기존 코드 패턴 따르기
- [ ] 에러 핸들링 포함
- [ ] 적절한 로깅 추가
- [ ] 문서화 (주석, Swagger 등)

### 5️⃣ **검증**
- [ ] Linter 오류 확인
- [ ] 프로덕션 환경 테스트
- [ ] 디자인 시스템 준수 확인
- [ ] 관련 규칙 파일 재확인

---

## 💡 규칙 파일 상태

### ✅ 기존 규칙 파일
- `00-navigation-hub.mdc` - 최상위 네비게이션
- `guidelines.mdc` - 항상 적용 (alwaysApply: true)
- `database/patterns.mdc` - 데이터베이스 패턴
- `backend/api-development.mdc` - Backend API 개발
- `frontend/components.mdc` - Frontend 개발
- `frontend/design-system.mdc` - 디자인 시스템
- `general/project-guidelines.mdc` - 프로젝트 가이드라인

### 🆕 새로 생성할 규칙 파일
- `database/access.mdc` - **실제 DB 접근 및 검증** (최우선)
- `backend/authentication.mdc` - 인증 및 권한
- `backend/server-infrastructure.mdc` - 서버 및 인프라
- `cloud/lambda.mdc` - Lambda 함수 개발
- `cloud/storage.mdc` - AWS S3/파일 관리
- `features/analytics.mdc` - 분석 로직
- `features/video.mdc` - 비디오 처리
- `general/testing.mdc` - 테스트 전략 (필요시)

---

## 🎯 우선순위 규칙

### P0 (최우선 - 항상 확인)
1. 새 파일 생성 금지
2. Soft delete 패턴
3. 디자인 시스템 준수
4. 관련 코드만 수정

### P1 (높음)
1. 실제 DB와 models.py 동기화
2. API 응답 형식 표준화
3. 에러 핸들링
4. 보안 (인증/권한)

### P2 (중간)
1. 성능 최적화
2. 코드 문서화
3. 로깅
4. 테스트 작성

### P3 (낮음)
1. 코드 리팩토링
2. 주석 개선
3. 변수명 일관성

---

## 📞 긴급 참고 사항

**문제 발생 시 순서:**
1. 해당 카테고리 규칙 파일 확인
2. 기존 코드에서 유사 패턴 찾기
3. 프로젝트 가이드라인 재확인
4. 프로덕션 URL에서 테스트

**절대 하지 말 것:**
- 새 파일 생성
- 하드 삭제 (.delete() 호출)
- CSS 하드코딩
- 관련 없는 코드 수정

**기억하세요: 일관성이 혁신보다 중요합니다!**
